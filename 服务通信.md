## 在工作空间的src目录下新建功能包
```C
ros2 pkg create servicePKG --build-type ament_cmake --dependencies rclcpp interfaces
```
## 在interfaces下新建srv文件夹，srv文件夹下新建AddInts.srv文件文件内容如下：
```C
int32 num1
int32 num2
---
int32 sum
```
## 编辑配置文件
- 在cmake文件中添加：
```C
rosidl_generate_interfaces(${PROJECT_NAME}
  "msg/Student.msg"
  "srv/AddInts.srv"
)
```
## 编译
```C
colcon build --packages-select interfaces
```
## 测试
```C
source install/setup.bash
ros2 interface show interfaces/srv/AddInts
```
## 服务端编写
```C
/*  
  需求：编写服务端，接收客户端发送请求，提取其中两个整型数据，相加后将结果响应回客户端。
  步骤：
    1.包含头文件；
    2.初始化 ROS2 客户端；
    3.定义节点类；
      3-1.创建服务端；
      3-2.处理请求数据并响应结果。
    4.调用spin函数，并传入节点对象指针；
    5.释放资源。
*/
#include "rclcpp/rclcpp.hpp"
#include "interfaces/srv/add_ints.hpp"

using namespace std;
using namespace rclcpp;
using namespace interfaces::srv;
using std::placeholders::_1;
using std::placeholders::_2;


class AddIntsServer:public Node
{
public:
    AddIntsServer():Node("AddIntsServer_node")
    {
        server=this->create_service<AddInts>("add_two_ints",bind(&AddIntsServer::add,this,_1,_2));
        RCLCPP_INFO(this->get_logger(),"addints服务端启动完毕，等待请求提交...");
    }
private:
    void add(const AddInts::Request::SharedPtr &req,const AddInts::Response::SharedPtr &res)//回调函数
    {
        //处理请求响应
        res->sum=req->num1+req->num2;
        RCLCPP_INFO(this->get_logger(),"请求数据：num1=%d,num2=%d,响应结果:sum=%d",req->num1,req->num2,req->num2);
    }
    Service<AddInts>::SharedPtr server; //创建服务端
};

int main(int argc,char**argv)
{
    //初始化ROS2客户端
    init(argc,argv);

    //spin
    spin(make_shared<AddIntsServer>());

    //释放资源
    shutdown();
}
```
## 编辑配置文件 
- 在cmake文件中添加
![config](https://github.com/user-attachments/assets/32d4d5bc-28e1-4db6-9afd-9fdba60c2a54)
